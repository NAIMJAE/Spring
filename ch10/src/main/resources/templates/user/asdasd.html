<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <!--
    //// fetch() 에서 /login 호출 ////

 : JWT FILTER-1 path : /login
 : JWT FILTER-2 header : null
 : JWT FILTER-3 token : null
 : JWT FILTER-11 다음 필터 이동(controller)

     : login - POST // UserController
     : ControllerLogin-1 인증 처리
     : ControllerLogin-2 DB 조회

         : securityUserService 시작
            SQL : Hibernate: select u1_0.uid, u1_0.age, u1_0.hp, u1_0.name, u1_0.pass, u1_0.regDate, u1_0.role from user u1_0 where u1_0.uid=?
         : securityUserService-1 DB에서 user 조회
         : securityUserService-2 result : Optional[User(uid=qqq111, pass=$2a$10$q3zPJ1oTbzHGsHS2vo4fNe.Z98Oq/NRUIwkcDxDqyVuIcCAocZAhu, name=홍길동, age=3, hp=010, role=ADMIN, regDate=2024-03-13T11:32:11.823870)]
         : securityUserService-3 사용자가 존재하는 경우
         : securityUserService-4 userDetails : MyUserDetails(user=User(uid=qqq111, pass=$2a$10$q3zPJ1oTbzHGsHS2vo4fNe.Z98Oq/NRUIwkcDxDqyVuIcCAocZAhu, name=홍길동, age=3, hp=010, role=ADMIN, regDate=2024-03-13T11:32:11.823870))
         : securityUserService 끝

     : ControllerLogin-3 인증된 사용자 가져오기
     : ControllerLogin-4 user : User(uid=qqq111, pass=$2a$10$q3zPJ1oTbzHGsHS2vo4fNe.Z98Oq/NRUIwkcDxDqyVuIcCAocZAhu, name=홍길동, age=3, hp=010, role=ADMIN, regDate=2024-03-13T11:32:11.823870)
     : ControllerLogin-5 토큰 발급

         : createToken 시작
         : createToken token : eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJuYWltamFlNTk4NUBnbWFpbC5jb20iLCJpYXQiOjE3MTA0ODc1NDYsImV4cCI6MTcxMDU3Mzk0NiwidXNlcm5hbWUiOiJxcXExMTEiLCJyb2xlIjoiQURNSU4ifQ.wYbCd5C4Tu4KEdR-0t4KMoT8zdn5imwNce0ldCBNme4
         : createToken 토큰 생성 완료
         : createToken 끝

     : ControllerLogin-6 access : eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJuYWltamFlNTk4NUBnbWFpbC5jb20iLCJpYXQiOjE3MTA0ODc1NDYsImV4cCI6MTcxMDU3Mzk0NiwidXNlcm5hbWUiOiJxcXExMTEiLCJyb2xlIjoiQURNSU4ifQ.wYbCd5C4Tu4KEdR-0t4KMoT8zdn5imwNce0ldCBNme4

         : createToken 시작
         : createToken token : eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJuYWltamFlNTk4NUBnbWFpbC5jb20iLCJpYXQiOjE3MTA0ODc1NDYsImV4cCI6MTcxMTA5MjM0NiwidXNlcm5hbWUiOiJxcXExMTEiLCJyb2xlIjoiQURNSU4ifQ.9muZXiIMlHHO19rwOv892XUN_Z7m-XJQ2RcVPyV1Nek
         : createToken 토큰 생성 완료
         : createToken 끝

     : ControllerLogin-6 refresh : eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJuYWltamFlNTk4NUBnbWFpbC5jb20iLCJpYXQiOjE3MTA0ODc1NDYsImV4cCI6MTcxMTA5MjM0NiwidXNlcm5hbWUiOiJxcXExMTEiLCJyb2xlIjoiQURNSU4ifQ.9muZXiIMlHHO19rwOv892XUN_Z7m-XJQ2RcVPyV1Nek
     : ControllerLogin-7 refresh 토큰 전달
     : ControllerLogin-8 access 토큰 전달
     : ControllerLogin-9 controller 정상 종료

    //// fetch() response로 전달 ////

    //// then()에서 list 호출 ////

 : JWT FILTER-1 path : /list
 : JWT FILTER-2 header : null
 : JWT FILTER-3 token : null

 : JWT FILTER-11 다음 필터 이동(controller)

     : userList - GET // MainController

 : JWT FILTER-1 path : /user
 : JWT FILTER-2 header : Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJuYWltamFlNTk4NUBnbWFpbC5jb20iLCJpYXQiOjE3MTA0ODc1NDYsImV4cCI6MTcxMDU3Mzk0NiwidXNlcm5hbWUiOiJxcXExMTEiLCJyb2xlIjoiQURNSU4ifQ.wYbCd5C4Tu4KEdR-0t4KMoT8zdn5imwNce0ldCBNme4
 : JWT FILTER-3 token : null
 : JWT FILTER-2(header != null) token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJuYWltamFlNTk4NUBnbWFpbC5jb20iLCJpYXQiOjE3MTA0ODc1NDYsImV4cCI6MTcxMDU3Mzk0NiwidXNlcm5hbWUiOiJxcXExMTEiLCJyb2xlIjoiQURNSU4ifQ.wYbCd5C4Tu4KEdR-0t4KMoT8zdn5imwNce0ldCBNme4
 : JWT FILTER-4 토큰 검사
 : JWT FILTER-5 try문

     : validateToken 토큰 유효성 검사 메서드
     : validateToken 토큰 이상 없음

 : JWT FILTER-10 토큰 인증 처리

     : getAuthentication 토큰 인증 메서드 시작
     : getClaims 토큰 정보 가져오는 메서드
     : getAuthentication-1 uid : qqq111
     : getAuthentication-2 role : ADMIN
     : getAuthentication-3 principal : User(uid=qqq111, pass=null, name=null, age=0, hp=null, role=ADMIN, regDate=null)
     : getAuthentication 토큰 인증 메서드 끝

 : JWT FILTER-11 다음 필터 이동(controller)

     : /User - GET (service로 목록 호출) // UserController
         : selectUsers 유저 목록 조회
    -->
</body>
</html>